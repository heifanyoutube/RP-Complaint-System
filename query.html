<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>RP é™³æƒ…ç³»çµ± - æŸ¥è©¢æ¡ˆä»¶</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: Arial; margin: 40px; }
input { margin: 4px; padding: 6px; width: 45%; }
button { padding: 6px 12px; }
img { margin-top: 10px; max-width: 300px; }
</style>
</head>
<body>
<h2>ğŸ” æŸ¥è©¢é™³æƒ…æ¡ˆä»¶</h2>
<input id="caseId" placeholder="æ¡ˆä»¶ç·¨è™Ÿ">
<input id="casePwd" placeholder="æŸ¥è©¢å¯†ç¢¼" type="password">
<button id="searchBtn">æŸ¥è©¢</button>

<div id="result"></div>

<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyC6NqzMI3cS7DHRnmk0tH2-9Wf4-kR7fxw",
  authDomain: "rp-complaint-system.firebaseapp.com",
  projectId: "rp-complaint-system",
  databaseURL: "https://rp-complaint-system-default-rtdb.firebaseio.com/"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

document.getElementById('searchBtn').onclick = async () => {
  const id = document.getElementById('caseId').value.trim();
  const pwd = document.getElementById('casePwd').value.trim();
  const snap = await db.ref('petitions/' + id).get();
  const resultDiv = document.getElementById('result');
  if (!snap.exists()) return resultDiv.innerText = "âŒ æŸ¥ç„¡æ­¤æ¡ˆä»¶";
  const data = snap.val();
  if (data.password !== pwd) return resultDiv.innerText = "ğŸ”’ å¯†ç¢¼éŒ¯èª¤";

  resultDiv.innerHTML = `
    <h3>${data.title}</h3>
    <p>ç‹€æ…‹ï¼š${data.status}</p>
    <p>å…§å®¹ï¼š${data.content}</p>
    <p>å›è¦†ï¼š${data.reply || "ï¼ˆå°šæœªå›è¦†ï¼‰"}</p>
    ${data.imageUrl ? `<img src="${data.imageUrl}">` : ""}
  `;
};
</script>
</body>
</html>
